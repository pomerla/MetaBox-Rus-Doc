<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!-- Begin Jekyll SEO tag v2.7.1 -->
<title>MB Relationships | Meta Box Documentation</title>
<meta name="generator" content="Jekyll v4.1.1">
<meta property="og:title" content="MB Relationships">
<meta property="og:locale" content="en">
<meta name="description" content="Overview">
<meta property="og:description" content="Overview">
<meta property="og:site_name" content="Meta Box Documentation">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2020-11-05T08:54:27+00:00">
<meta name="twitter:card" content="summary">
<meta property="twitter:title" content="MB Relationships">
<meta name="twitter:site" content="@wpmetabox">
<meta name="twitter:creator" content="@wpmetabox">
<meta property="article:publisher" content="1952571948302060">
<script type="application/ld+json">
{"description":"Overview","url":"/extensions/mb-relationships/","headline":"MB Relationships","dateModified":"2020-11-05T08:54:27+00:00","datePublished":"2020-11-05T08:54:27+00:00","mainEntityOfPage":{"@type":"WebPage","@id":"/extensions/mb-relationships/"},"@type":"BlogPosting","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://docs.metabox.io/assets/images/logo.png"}},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

	<link href="https://fonts.googleapis.com/css?family=Roboto+Slab:700&amp;display=swap" rel="stylesheet" media="print" onload="this.media='all'">
	<link rel="stylesheet" href="/assets/style.css">
	<link rel="icon" href="/assets/icon.png" sizes="32x32">
	<link rel="icon" href="/assets/icon.png" sizes="192x192">
	<link rel="apple-touch-icon-precomposed" href="/assets/icon.png">
	<meta name="msapplication-TileImage" content="/assets/icon.png">
	<!-- Google Tag Manager -->
	<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
	new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
	j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
	'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-5RNCMR7');</script>
	<!-- End Google Tag Manager -->
</head>
<body>
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5RNCMR7" height="0" width="0" style="display:none;visibility:hidden" loading="lazy"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
<div class="site">
	<!--<a href="https://metabox.io/pricing/" title="Christmas And New Year Sale" style="display: block"><img src="https://i.imgur.com/aJQwTxp.jpg" alt="Christmas and New Year Sale" style="display: block" width="1440" height="90"></a>-->
	<div class="top-bar">
		<nav class="header-navigation top-bar-navigation" role="navigation">
			<ul class="menu">
				<li class="menu-item"><a href="http://demo.metabox.io">Demo</a></li>
				<li class="menu-item"><a href="https://metabox.io/online-generator/">Online Generator</a></li>
				<li class="menu-item"><a href="https://metabox.io/post-type-generator/">Post Type Generator</a></li>
				<li class="menu-item"><a href="https://metabox.io/taxonomy-generator/">Taxonomy Generator</a></li>
			</ul>
		</nav>
		<nav class="header-navigation top-bar-navigation" role="navigation">
			<ul class="menu">
				<li class="menu-item"><a href="https://metabox.io/my-account/">My Account</a></li>
			</ul>
		</nav>
	</div>
	<header id="masthead" class="site-header" role="banner">
		<h2 class="site-title">
			<a href="https://metabox.io/" class="logo" rel="home">
				<svg viewbox="227 227 46 46" width="46" height="46" xmlns="http://www.w3.org/2000/svg">
					<rect style="" x="227" y="227" width="46" height="46" rx="4" ry="4"></rect>
					<path d="M 256.873 255.508 L 257.283 246.088 L 257.193 246.078 L 251.483 261.868 L 248.613 261.868 L 242.933 246.138 L 242.843 246.148 L 243.253 255.508 L 243.253 258.868 L 245.533 259.308 L 245.533 261.868 L 236.703 261.868 L 236.703 259.308 L 238.973 258.868 L 238.973 243.558 L 236.703 243.118 L 236.703 240.538 L 238.973 240.538 L 244.553 240.538 L 249.993 256.258 L 250.073 256.258 L 255.553 240.538 L 263.433 240.538 L 263.433 243.118 L 261.153 243.558 L 261.153 258.868 L 263.433 259.308 L 263.433 261.868 L 254.603 261.868 L 254.603 259.308 L 256.873 258.868 L 256.873 255.508 Z" style="fill:#fff"></path>
				</svg>
				Meta Box
			</a>
		</h2>

		<nav id="site-navigation" class="main-navigation header-navigation" role="navigation">
			<button class="menu-toggle" aria-controls="primary-menu" aria-expanded="false">Menu</button>
			<ul id="primary-menu" class="menu nav-menu" aria-expanded="false">
				<li class="menu-item"><a href="https://metabox.io/meta-box/">Features</a></li>
				<li class="menu-item"><a href="https://metabox.io/pricing/">Pricing</a></li>
				<li class="menu-item menu-item-has-children">
					<a href="https://metabox.io/plugins/">Products</a>
					<ul class="sub-menu">
						<li class="menu-item"><a href="https://metabox.io/plugins/">Extensions</a></li>
						<li class="menu-item"><a href="https://metabox.io/product-category/solutions/">Solutions</a></li>
						<li class="menu-item"><a href="https://metabox.io/resources/">3rd-party</a></li>
					</ul>
				</li>
				<li class="menu-item current-menu-item menu-item-has-children">
					<a href="#">Support</a>
					<ul class="sub-menu">
						<li class="menu-item current-menu-item"><a href="/">Documentation</a></li>
						<li class="menu-item"><a href="https://metabox.io/resouces/">Resources</a></li>
						<li class="menu-item"><a href="https://metabox.io/support/">Support Forum</a></li>
					</ul>
				</li>
				<li class="menu-item"><a href="https://metabox.io/blog/">Blog</a></li>
				<li class="menu-item"><a href="https://metabox.io/pricing/" class="button button--cyan button--menu">Get Meta Box</a></li>
			</ul>
		</nav>
	</header>


<main id="main" class="site-content" role="main">
	<nav class="docs-navigation" role="navigation">
	<input type="text" class="docs-navigation__filter" placeholder="Search documentation" id="filter" autofocus>
	<ul class="docs-navigation__menu">
		
			
			
			<li class="docs-navigation__cat ">
				<h4 class="docs-navigation__heading">Getting Started</h4>
				<ul class="docs-navigation__list">
					
						
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/">Welcome</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/installation/">Installation</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/quick-start/">Quick start</a></li>
						
					
				</ul>
			</li>
		
			
			
			<li class="docs-navigation__cat ">
				<h4 class="docs-navigation__heading">Online Tools</h4>
				<ul class="docs-navigation__list">
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/post-type-generator/">Post Type Generator</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/taxonomy-generator/">Taxonomy Generator</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/online-generator/">Online Generator</a></li>
						
					
				</ul>
			</li>
		
			
			
			<li class="docs-navigation__cat ">
				<h4 class="docs-navigation__heading">Basics</h4>
				<ul class="docs-navigation__list">
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/creating-meta-boxes/">Creating meta boxes</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/field-settings/">Field settings</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/displaying-fields/">Displaying fields</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/shortcode/">Shortcode</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/validation/">Validation</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/sanitization/">Sanitization</a></li>
						
					
						
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/cloning-fields/">Cloning Fields</a></li>
						
					
				</ul>
			</li>
		
			
			
			<li class="docs-navigation__cat ">
				<h4 class="docs-navigation__heading">Advanced</h4>
				<ul class="docs-navigation__list">
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/custom-attributes/">Custom attributes</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/integration/">Integration</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/database/">Database</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/custom-field-type/">Custom field type</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/html5-input-types/">HTML5 Input Types</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/composer/">Composer</a></li>
						
					
				</ul>
			</li>
		
			
			
			<li class="docs-navigation__cat ">
				<h4 class="docs-navigation__heading">Fields</h4>
				<ul class="docs-navigation__list">
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/fields/autocomplete/">Autocomplete</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/fields/background/">Background</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/fields/button/">Button</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/fields/button-group/">Button Group</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/fields/checkbox/">Checkbox</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/fields/checkbox-list/">Checkbox list</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/fields/color/">Color</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/fields/custom-html/">Custom HTML</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/fields/date/">Date</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/fields/datetime/">Datetime</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/fields/divider/">Divider</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/fields/fieldset-text/">Fieldset Text</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/fields/file/">File</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/fields/file-advanced/">File Advanced</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/fields/file-input/">File Input</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/fields/file-upload/">File Upload</a></li>
						
					
						
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/fields/map/">Google Maps</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/fields/heading/">Heading</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/fields/hidden/">Hidden</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/fields/image/">Image</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/fields/image-advanced/">Image Advanced</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/fields/image-select/">Image Select</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/fields/image-upload/">Image Upload</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/fields/key-value/">Key Value</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/fields/number/">Number</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/fields/oembed/">oEmbed</a></li>
						
					
						
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/fields/osm/">Open Street Map</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/fields/password/">Password</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/fields/post/">Post</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/fields/radio/">Radio</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/fields/range/">Range</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/fields/select/">Select</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/fields/select-advanced/">Select Advanced</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/fields/sidebar/">Sidebar</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/fields/single-image/">Single image</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/fields/slider/">Slider</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/fields/switch/">Switch</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/fields/taxonomy/">Taxonomy</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/fields/taxonomy-advanced/">Taxonomy Advanced</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/fields/text/">Text</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/fields/text-list/">Text List</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/fields/textarea/">Textarea</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/fields/time/">Time</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/fields/user/">User</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/fields/video/">Video</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/fields/wysiwyg/">WYSIWYG</a></li>
						
					
				</ul>
			</li>
		
			
			
			<li class="docs-navigation__cat is-active">
				<h4 class="docs-navigation__heading">Extensions</h4>
				<ul class="docs-navigation__list">
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/extensions/mb-admin-columns/">MB Admin Columns</a></li>
						
					
						
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/extensions/mb-blocks/">MB Blocks</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/extensions/mb-custom-post-type/">MB Custom Post Type</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/extensions/mb-custom-table/">MB Custom Table</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/extensions/mb-frontend-submission/">MB Frontend Submission</a></li>
						
					
						
							
							<li class="docs-navigation__item is-active"><a class="docs-navigation__link" href="/extensions/mb-relationships/">MB Relationships</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/extensions/mb-rest-api/">MB Rest API</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/extensions/mb-revision/">MB Revision</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/extensions/mb-settings-page/">MB Settings Page</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/extensions/mb-term-meta/">MB Term Meta</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/extensions/mb-user-meta/">MB User Meta</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/extensions/mb-user-profile/">MB User Profile</a></li>
						
					
						
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/extensions/mb-views/">MB Views</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/extensions/meta-box-builder/">Meta Box Builder</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/extensions/meta-box-columns/">Meta Box Columns</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/extensions/meta-box-conditional-logic/">Meta Box Conditional Logic</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/extensions/meta-box-yoast-seo/">Meta Box for Yoast SEO</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/extensions/meta-box-geolocation/">Meta Box Geolocation</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/extensions/meta-box-group/">Meta Box Group</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/extensions/meta-box-include-exclude/">Meta Box Include Exclude</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/extensions/meta-box-show-hide/">Meta Box Show Hide</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/extensions/meta-box-tabs/">Meta Box Tabs</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/extensions/meta-box-template/">Meta Box Template</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/extensions/meta-box-text-limiter/">Meta Box Text Limiter</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/extensions/meta-box-tooltip/">Meta Box Tooltip</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/extensions/meta-box-updater/">Meta Box Updater</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/extensions/meta-box-aio/">Meta Box AIO</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/extensions/update/">Update</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/extensions/integration/">Integration</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/extensions/composer/">Composer</a></li>
						
					
				</ul>
			</li>
		
			
			
			<li class="docs-navigation__cat ">
				<h4 class="docs-navigation__heading">References</h4>
				<ul class="docs-navigation__list">
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/actions/">Actions</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/filters/">Filters</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/rwmb-field-class/">RWMB_Field Class</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/rwmb-meta/">rwmb_meta</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/rwmb-set-meta/">rwmb_set_meta</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/rwmb-the-value/">rwmb_the_value</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/rwmb-get-value/">rwmb_get_value</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/rwmb-get-object-fields/">rwmb_get_object_fields</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/rwmb-get-field-settings/">rwmb_get_field_settings</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/rwmb-get-registry/">rwmb_get_registry</a></li>
						
					
				</ul>
			</li>
		
			
			
			<li class="docs-navigation__cat ">
				<h4 class="docs-navigation__heading">Tutorials</h4>
				<ul class="docs-navigation__list">
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/edit-meta-boxes/">Edit meta boxes</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/custom-select-checkbox-tree/">Custom Select / Checkbox Tree</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/include-exclude-show-hide-conditional-logic/">Include Exclude vs Show Hide vs Conditional Logic</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/using-two-date-formats/">Using 2 date formats</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/hide-tabs-with-conditional-logic/">Hide Tabs with Conditional Logic</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/create-columns-in-meta-box-builder/">Create columns in Meta Box Builder?</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/save-wysiwyg-content-post-content/">Save WYSIWYG content as post content</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/using-custom-html-to-output-anything/">Using custom HTML to output anything</a></li>
						
					
						
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="https://metabox.io/blog/">See more tutorials →</a></li>
						
					
				</ul>
			</li>
		
			
			
			<li class="docs-navigation__cat ">
				<h4 class="docs-navigation__heading">Compatibility</h4>
				<ul class="docs-navigation__list">
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/compatible-themes/">Themes</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/compatible-plugins/">Plugins</a></li>
						
					
						
							
							<li class="docs-navigation__item "><a class="docs-navigation__link" href="/compatible-hostings/">Hostings</a></li>
						
					
				</ul>
			</li>
		
	</ul>
</nav>

	<article class="hentry">
		<header class="entry-header">
			<h1 class="entry-title">MB Relationships</h1>
			<a class="edit" target="_blank" href="//github.com/wpmetabox/docs/edit/master/_docs/extensions/mb-relationships.md"><svg class="icon icon-edit" aria-hidden="true" role="img"><use href="#icon-edit" xlink:href="#icon-edit"></use></svg>Edit this page on Github</a>
		</header>
		<div class="entry-body">
			<div class="entry-content">
				<h2 id="overview">Overview</h2>

<p>The MB Relationships extension helps you to create many-to-many relationships between posts, terms and users in WordPress. Creating and managing relationships between objects is a missing feature in WordPress and this extension resolves it.</p>

<p>MB Relationships creates an UI when you edit a post, a term or an user and let you select related objects. Then you can show them in the front end.</p>

<p>The extension is built with performance in mind. It creates a custom table for storing relationships and integrates with default WordPress’s queries to retrieve the connected items easily.</p>

<p>For more information about the extension, please see the <a href="https://metabox.io/plugins/mb-relationships/">extension page</a>.</p>

<p>This documentation will show you how to create relationships between posts, terms, users, and how to display connected items in the frontend.</p>

<h2 id="installation">Installation</h2>
<p>Before installing the extension, you need to install Meta Box plugin first.</p>

<ol>
  <li>Go to <em>Plugins → Add New</em> and search for <strong>Meta Box</strong>
</li>
  <li>Click <strong>Install Now</strong> button to install the plugin</li>
  <li>After installing, click <strong>Activate Plugin</strong> to activate the plugin</li>
</ol>

<p>The extension is just a WordPress plugin, you can install it like a normal WordPress plugin.</p>

<ol>
  <li>Go to <em>Plugins</em>, click <strong>Add new</strong>, then click <strong>Upload plugin</strong>.</li>
  <li>Choose the <code class="language-plaintext highlighter-rouge">.zip</code> file you downloaded and click <strong>Install now</strong>
</li>
  <li>After finishing upload, click <strong>Activate</strong> to finish.</li>
</ol>

<h2 id="creating-relationships">Creating relationships</h2>

<h3 id="basic-usage">Basic usage</h3>

<p>The code below registers a relationship from posts to pages. Open your theme’s <code class="language-plaintext highlighter-rouge">functions.php</code> file and add:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">add_action</span><span class="p">(</span> <span class="s1">'mb_relationships_init'</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">MB_Relationships_API</span><span class="o">::</span><span class="nf">register</span><span class="p">(</span> <span class="p">[</span>
        <span class="s1">'id'</span>   <span class="o">=&gt;</span> <span class="s1">'posts_to_pages'</span><span class="p">,</span>
        <span class="s1">'from'</span> <span class="o">=&gt;</span> <span class="s1">'post'</span><span class="p">,</span>
        <span class="s1">'to'</span>   <span class="o">=&gt;</span> <span class="s1">'page'</span><span class="p">,</span>
    <span class="p">]</span> <span class="p">);</span>
<span class="p">}</span> <span class="p">);</span>
</code></pre></div></div>

<p>This code will show 2 meta boxes for posts and pages in the edit screens:</p>

<ul>
  <li>For posts: the meta box to select connected pages.</li>
  <li>For pages: the meta box to show the posts that connect from.</li>
</ul>

<p>Both meta boxes are registered using the <em>Meta Box</em> plugin, thus it’s flexible and editable. The <em>Syntax</em> section will cover some settings for the relationship and meta boxes.</p>

<h3 id="terms-to-posts">Terms to posts</h3>

<p>The following example registers a relationship from categories to posts. The settings for <code class="language-plaintext highlighter-rouge">from</code> and <code class="language-plaintext highlighter-rouge">to</code> is a little bit more advanced than above.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">add_action</span><span class="p">(</span> <span class="s1">'mb_relationships_init'</span><span class="p">,</span> <span class="k">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="n">MB_Relationships_API</span><span class="o">::</span><span class="nf">register</span><span class="p">(</span> <span class="p">[</span>
        <span class="s1">'id'</span>   <span class="o">=&gt;</span> <span class="s1">'categories_to_posts'</span><span class="p">,</span>
        <span class="s1">'from'</span> <span class="o">=&gt;</span> <span class="p">[</span>
            <span class="s1">'object_type'</span> <span class="o">=&gt;</span> <span class="s1">'term'</span><span class="p">,</span>
            <span class="s1">'taxonomy'</span>    <span class="o">=&gt;</span> <span class="s1">'category'</span><span class="p">,</span>
        <span class="p">],</span>
        <span class="s1">'to'</span>   <span class="o">=&gt;</span> <span class="s1">'post'</span><span class="p">,</span>
    <span class="p">]</span> <span class="p">);</span>
<span class="p">}</span> <span class="p">);</span>
</code></pre></div></div>

<h3 id="users-to-posts">Users to posts</h3>

<p>The following example registers a relationship from users to posts. It has some advanced settings that we will explain in the <em>Syntax</em> section.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">add_action</span><span class="p">(</span> <span class="s1">'mb_relationships_init'</span><span class="p">,</span> <span class="k">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="n">MB_Relationships_API</span><span class="o">::</span><span class="nf">register</span><span class="p">(</span> <span class="p">[</span>
        <span class="s1">'id'</span>   <span class="o">=&gt;</span> <span class="s1">'users_to_posts'</span><span class="p">,</span>
        <span class="s1">'from'</span> <span class="o">=&gt;</span> <span class="p">[</span>
            <span class="s1">'object_type'</span> <span class="o">=&gt;</span> <span class="s1">'user'</span><span class="p">,</span>
            <span class="s1">'meta_box'</span>    <span class="o">=&gt;</span> <span class="p">[</span>
                <span class="s1">'title'</span> <span class="o">=&gt;</span> <span class="s1">'Manages'</span><span class="p">,</span>
            <span class="p">],</span>
        <span class="p">],</span>
        <span class="s1">'to'</span>   <span class="o">=&gt;</span> <span class="p">[</span>
            <span class="s1">'object_type'</span> <span class="o">=&gt;</span> <span class="s1">'post'</span><span class="p">,</span>
            <span class="s1">'post_type'</span>   <span class="o">=&gt;</span> <span class="s1">'post'</span><span class="p">,</span>
            <span class="s1">'meta_box'</span>    <span class="o">=&gt;</span> <span class="p">[</span>
                <span class="s1">'title'</span> <span class="o">=&gt;</span> <span class="s1">'Managed By'</span><span class="p">,</span>
            <span class="p">],</span>
        <span class="p">],</span>
    <span class="p">]</span> <span class="p">);</span>
<span class="p">}</span> <span class="p">);</span>
</code></pre></div></div>

<h3 id="syntax">Syntax</h3>

<p>The main API function <code class="language-plaintext highlighter-rouge">MB_Relationships_API::register</code> has the following parameters:</p>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">id</code></td>
      <td>The relationship ID (or type). It’s used to identify a relationship from others. Required.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">from</code></td>
      <td>The “from” side of the relationship. Required. See below for details.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">to</code></td>
      <td>The “to” side of the relationship. Required. See below for details.</td>
    </tr>
  </tbody>
</table>

<p>Both sides <code class="language-plaintext highlighter-rouge">from</code> or <code class="language-plaintext highlighter-rouge">to</code> accepts various parameters for the connection and meta box.</p>

<p>If you pass <strong>a string</strong> to <code class="language-plaintext highlighter-rouge">from</code> or <code class="language-plaintext highlighter-rouge">to</code> (like we did in the <em>Basic usage</em> section above), the plugin will understand that as the <strong>post type</strong>. So the relationship will be created from posts to posts with specific post types.</p>

<p>If you pass <strong>an array</strong> to <code class="language-plaintext highlighter-rouge">from</code> or <code class="language-plaintext highlighter-rouge">to</code>, then the array accepts the following parameters:</p>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">object_type</code></td>
      <td>The object type the relationship is created from/to: <code class="language-plaintext highlighter-rouge">post</code> (default), <code class="language-plaintext highlighter-rouge">term</code> or <code class="language-plaintext highlighter-rouge">user</code>. Optional.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">post_type</code></td>
      <td>The post type if the <code class="language-plaintext highlighter-rouge">object_type</code> is set to <code class="language-plaintext highlighter-rouge">post</code>. Default <code class="language-plaintext highlighter-rouge">post</code>. Optional.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">taxonomy</code></td>
      <td>The taxonomy if the <code class="language-plaintext highlighter-rouge">object_type</code> is set to <code class="language-plaintext highlighter-rouge">term</code>.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">empty_message</code></td>
      <td>The message displayed when there’s no connections.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">meta_box</code></td>
      <td>Meta box settings, has the <a href="https://docs.metabox.io/creating-meta-boxes/">same settings as a normal meta box</a>. Below are common settings you might want to change:</td>
    </tr>
    <tr>
      <td>– <code class="language-plaintext highlighter-rouge">title</code>
</td>
      <td>The meta box title. Default is “Connect To” for “from” side and “Connected From” for “to” side.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">field</code></td>
      <td>Field settings, has the <a href="https://docs.metabox.io/field-settings/">same settings as a normal post/user/taxonomy field</a> according to the object type. Below are common settings you might want to change:</td>
    </tr>
    <tr>
      <td>– <code class="language-plaintext highlighter-rouge">name</code>
</td>
      <td>Field title.</td>
    </tr>
    <tr>
      <td>– <code class="language-plaintext highlighter-rouge">placeholder</code>
</td>
      <td>Placeholder text.</td>
    </tr>
    <tr>
      <td>– <code class="language-plaintext highlighter-rouge">query_args</code>
</td>
      <td>Custom query arguments to get objects of <code class="language-plaintext highlighter-rouge">object_type</code>. These arguments will be passed to <code class="language-plaintext highlighter-rouge">WP_Query()</code>, <code class="language-plaintext highlighter-rouge">get_terms()</code> or <code class="language-plaintext highlighter-rouge">get_users()</code> depending what <code class="language-plaintext highlighter-rouge">object_type</code> is.</td>
    </tr>
    <tr>
      <td>– <code class="language-plaintext highlighter-rouge">max_clone</code>
</td>
      <td>Maximum number of connections.</td>
    </tr>
  </tbody>
</table>

<p>The field settings apply from object <code class="language-plaintext highlighter-rouge">from</code> to object <code class="language-plaintext highlighter-rouge">to</code>. That means, the custom field (relationship) shows on the object <code class="language-plaintext highlighter-rouge">from</code> get object type, post type and field settings from object <code class="language-plaintext highlighter-rouge">to</code>.</p>

<h3 id="reciprocal-relationships">Reciprocal relationships</h3>

<p>To make reciprocal relationships, add another parameter <code class="language-plaintext highlighter-rouge">'reciprocal' =&gt; true</code>:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">add_action</span><span class="p">(</span> <span class="s1">'mb_relationships_init'</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">MB_Relationships_API</span><span class="o">::</span><span class="nf">register</span><span class="p">(</span> <span class="p">[</span>
        <span class="s1">'id'</span>         <span class="o">=&gt;</span> <span class="s1">'posts_to_pages'</span><span class="p">,</span>
        <span class="s1">'from'</span>       <span class="o">=&gt;</span> <span class="s1">'post'</span><span class="p">,</span>
        <span class="s1">'to'</span>         <span class="o">=&gt;</span> <span class="s1">'post'</span><span class="p">,</span>
        <span class="s1">'reciprocal'</span> <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// THIS</span>
    <span class="p">]</span> <span class="p">);</span>
<span class="p">}</span> <span class="p">);</span>
</code></pre></div></div>

<p>When you edit a post, the plugin will show only one meta box to let you select connected posts.</p>

<h3 id="bi-directional-relationships">Bi-directional relationships</h3>

<p>While the relationships are registered clearly with term “from” and “to”, the connections are actually bi-directional. You will be able to query back and forth without any problem. The query API is explained in the next section.</p>

<p>The data is stored in the database as a pair of (from_id, to_id), thus making it independent from either side.</p>

<h2 id="getting-connected-items">Getting connected items</h2>

<h3 id="api">API</h3>

<p>Using the API is the fastest and simplest way to get connected items:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$pages</span> <span class="o">=</span> <span class="n">MB_Relationships_API</span><span class="o">::</span><span class="nf">get_connected</span><span class="p">(</span> <span class="p">[</span>
    <span class="s1">'id'</span>   <span class="o">=&gt;</span> <span class="s1">'posts_to_pages'</span><span class="p">,</span>
    <span class="s1">'from'</span> <span class="o">=&gt;</span> <span class="nf">get_the_ID</span><span class="p">(),</span>
<span class="p">]</span> <span class="p">);</span>
<span class="k">foreach</span> <span class="p">(</span> <span class="nv">$pages</span> <span class="k">as</span> <span class="nv">$p</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="nv">$p</span><span class="o">-&gt;</span><span class="n">post_title</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>If you need more control on connected items (like sorting, limiting the number of items), see the sections below for each type of content.</p>

<h3 id="posts">Posts</h3>

<p>To get pages that are connected from a specific post (the <em>Basic Usage</em> example), use the following code:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$connected</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">WP_Query</span><span class="p">(</span> <span class="p">[</span>
    <span class="s1">'relationship'</span> <span class="o">=&gt;</span> <span class="p">[</span>
        <span class="s1">'id'</span>   <span class="o">=&gt;</span> <span class="s1">'posts_to_pages'</span><span class="p">,</span>
        <span class="s1">'from'</span> <span class="o">=&gt;</span> <span class="nf">get_the_ID</span><span class="p">(),</span> <span class="c1">// You can pass object ID or full object</span>
    <span class="p">],</span>
    <span class="s1">'nopaging'</span>     <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
<span class="p">]</span> <span class="p">);</span>
<span class="k">while</span> <span class="p">(</span> <span class="nv">$connected</span><span class="o">-&gt;</span><span class="nf">have_posts</span><span class="p">()</span> <span class="p">)</span> <span class="o">:</span> <span class="nv">$connected</span><span class="o">-&gt;</span><span class="nf">the_post</span><span class="p">();</span>
    <span class="cp">?&gt;</span>
    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">&lt;?php</span> <span class="nf">the_permalink</span><span class="p">();</span> <span class="cp">?&gt;</span><span class="s">"</span><span class="nt">&gt;</span><span class="cp">&lt;?php</span> <span class="nf">the_title</span><span class="p">();</span> <span class="cp">?&gt;</span><span class="nt">&lt;/a&gt;</span>
    <span class="cp">&lt;?php</span>
<span class="k">endwhile</span><span class="p">;</span>
<span class="nf">wp_reset_postdata</span><span class="p">();</span>
</code></pre></div></div>

<p>Basically, to query for connected posts, just pass another parameter <code class="language-plaintext highlighter-rouge">relationship</code> to <code class="language-plaintext highlighter-rouge">WP_Query()</code>.</p>

<p>If you want to display posts that connected to a specific page (the <strong>backward query</strong>), then just replace <code class="language-plaintext highlighter-rouge">from</code> by <code class="language-plaintext highlighter-rouge">to</code> in the code above:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$connected</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">WP_Query</span><span class="p">(</span> <span class="p">[</span>
    <span class="s1">'relationship'</span> <span class="o">=&gt;</span> <span class="p">[</span>
        <span class="s1">'id'</span> <span class="o">=&gt;</span> <span class="s1">'posts_to_pages'</span><span class="p">,</span>
        <span class="s1">'to'</span> <span class="o">=&gt;</span> <span class="nf">get_the_ID</span><span class="p">(),</span> <span class="c1">// You can pass object ID or full object</span>
    <span class="p">],</span>
    <span class="s1">'nopaging'</span>     <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
<span class="p">]</span> <span class="p">);</span>
</code></pre></div></div>

<p>That’s all.</p>

<p><strong>So, why WP_Query() you might ask?</strong></p>

<p>There are 3 reasons that we want to use <code class="language-plaintext highlighter-rouge">WP_Query()</code>:</p>

<ol>
  <li>Using <code class="language-plaintext highlighter-rouge">WP_Query()</code> allows developers to create a <strong>flexible</strong> query to database. Imagine you want to get related posts (which are set manually by the plugin) <em>and</em> in the same category. <code class="language-plaintext highlighter-rouge">WP_Query()</code> allows you to do that easily. Without it, you probably need to create 2 manual queries (1 from relationship, 1 from category).</li>
  <li>
<code class="language-plaintext highlighter-rouge">WP_Query()</code> is optimized for getting posts. It actually creates <strong>only 1 query</strong> to the database. Besides, in that single query, you’ll be able to retrieve <strong>full post objects</strong>, not just post IDs. (You still can retrieve only post IDs if you set <code class="language-plaintext highlighter-rouge">'fields' =&gt; 'ids'</code> - how flexible it is!).</li>
  <li>
<code class="language-plaintext highlighter-rouge">WP_Query()</code> is so familiar with WordPress developers. No need to introduce another API just for the same purpose.</li>
</ol>

<p>Also note that, in the example above, we set <code class="language-plaintext highlighter-rouge">nopaging</code> to <code class="language-plaintext highlighter-rouge">true</code>, which disable pagination. So the query returns all the connected posts.</p>

<p>For the full list of supported parameters for <code class="language-plaintext highlighter-rouge">WP_Query()</code>, please see the <a href="https://codex.wordpress.org/Class_Reference/WP_Query">documentation</a>.</p>

<h3 id="terms">Terms</h3>

<p>Similar to posts, getting connected terms is simple:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$terms</span>  <span class="o">=</span> <span class="nf">get_terms</span><span class="p">(</span> <span class="p">[</span>
    <span class="s1">'taxonomy'</span>     <span class="o">=&gt;</span> <span class="s1">'category'</span><span class="p">,</span>
    <span class="s1">'hide_empty'</span>   <span class="o">=&gt;</span> <span class="kc">false</span><span class="p">,</span>
    <span class="s1">'relationship'</span> <span class="o">=&gt;</span> <span class="p">[</span>
        <span class="s1">'id'</span> <span class="o">=&gt;</span> <span class="s1">'categories_to_posts'</span><span class="p">,</span>
        <span class="s1">'to'</span> <span class="o">=&gt;</span> <span class="nf">get_the_ID</span><span class="p">(),</span> <span class="c1">// You can pass object ID or full object</span>
    <span class="p">],</span>
<span class="p">]</span> <span class="p">);</span>
<span class="k">foreach</span> <span class="p">(</span> <span class="nv">$terms</span> <span class="k">as</span> <span class="nv">$term</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="nv">$term</span><span class="o">-&gt;</span><span class="n">name</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>We use the WordPress’s function <code class="language-plaintext highlighter-rouge">get_terms()</code> with an additional parameter <code class="language-plaintext highlighter-rouge">relationship</code> with the same reasons as for posts.</p>

<p>For the full list of supported parameters for <code class="language-plaintext highlighter-rouge">get_terms()</code>, please see the <a href="https://developer.wordpress.org/reference/functions/get_terms/">documentation</a>.</p>

<h3 id="users">Users</h3>

<p>Similar to posts, getting connected users is simple:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$users</span>  <span class="o">=</span> <span class="nf">get_users</span><span class="p">(</span> <span class="p">[</span>
    <span class="s1">'relationship'</span> <span class="o">=&gt;</span> <span class="p">[</span>
        <span class="s1">'id'</span> <span class="o">=&gt;</span> <span class="s1">'users_to_posts'</span><span class="p">,</span>
        <span class="s1">'to'</span> <span class="o">=&gt;</span> <span class="nf">get_the_ID</span><span class="p">(),</span> <span class="c1">// You can pass object ID or full object</span>
    <span class="p">],</span>
<span class="p">]</span> <span class="p">);</span>
<span class="k">foreach</span> <span class="p">(</span> <span class="nv">$users</span> <span class="k">as</span> <span class="nv">$user</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="nv">$user</span><span class="o">-&gt;</span><span class="n">display_name</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>We use the WordPress’s function <code class="language-plaintext highlighter-rouge">get_users()</code> with an additional parameter <code class="language-plaintext highlighter-rouge">relationship</code> with the same reasons as for posts.</p>

<p>For the full list of supported parameters for <code class="language-plaintext highlighter-rouge">get_users()</code>, please see the <a href="https://codex.wordpress.org/Function_Reference/get_users">documentation</a>.</p>

<h3 id="syntax-1">Syntax</h3>

<p>The <code class="language-plaintext highlighter-rouge">relationship</code> parameter for querying accepts the following parameters:</p>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">id</code></td>
      <td>The relationship ID.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">from</code></td>
      <td>The object(s) that you want to get connected items from. Accept single or array of object(s) or object ID(s).</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">to</code></td>
      <td>The object(s) that you want to get connected items to. Accept single or array of object(s) or object ID(s).</td>
    </tr>
  </tbody>
</table>

<p><strong>How to get the ID of current item</strong></p>

<p>In the examples above, we use <code class="language-plaintext highlighter-rouge">get_the_ID()</code> to get the ID of the current post. But if we query for connected posts from a relationship <code class="language-plaintext highlighter-rouge">terms_to_posts</code>, then that function doesn’t work.</p>

<p>In that case, we need to use the following functions:</p>

<table>
  <thead>
    <tr>
      <th>Function</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href="https://codex.wordpress.org/Function_Reference/get_queried_object"><code class="language-plaintext highlighter-rouge">get_queried_object()</code></a></td>
      <td>Get the current-queried object. If you’re on a single post/page, it will return the post object. If you’re on a category archive, it will return the category object and so on. Note that in the code above, <code class="language-plaintext highlighter-rouge">from</code> and <code class="language-plaintext highlighter-rouge">to</code> accepts both object ID add full object.</td>
    </tr>
    <tr>
      <td><a href="https://developer.wordpress.org/reference/functions/get_queried_object_id/"><code class="language-plaintext highlighter-rouge">get_queried_object_id()</code></a></td>
      <td>Get the current-queried object ID. Similar to the above function but returns only object ID.</td>
    </tr>
    <tr>
      <td><a href="https://developer.wordpress.org/reference/functions/get_current_user_id/"><code class="language-plaintext highlighter-rouge">get_current_user_id()</code></a></td>
      <td>Get current user ID.</td>
    </tr>
  </tbody>
</table>

<h2 id="sibling-items">Sibling items</h2>

<p>Assume you have 2 custom post types: student and class. Each student can join 1 or more class (many-to-many relationship). Now how to get the classmate of the given student A?</p>

<p>Since version 1.2.0, the plugin introduces new API to get sibling items. To get sibling of a post, simply add <code class="language-plaintext highlighter-rouge">'sibling' =&gt; true</code> to the query as follows:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$siblings</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">WP_Query</span><span class="p">(</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'relationship'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'id'</span>      <span class="o">=&gt;</span> <span class="s1">'posts_to_pages'</span><span class="p">,</span>
        <span class="s1">'to'</span>      <span class="o">=&gt;</span> <span class="nf">get_the_ID</span><span class="p">(),</span>
        <span class="s1">'sibling'</span> <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
    <span class="p">),</span>
    <span class="s1">'nopaging'</span>     <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
<span class="p">)</span> <span class="p">);</span>
</code></pre></div></div>

<p>The code is similar to the above section, except the extra <code class="language-plaintext highlighter-rouge">sibling</code> parameter. That parameter works for all post, term or user query.</p>

<h2 id="admin-column">Admin column</h2>

<p>In order to show the connections, add the <code class="language-plaintext highlighter-rouge">admin_column</code> parameter to the <code class="language-plaintext highlighter-rouge">from</code> or <code class="language-plaintext highlighter-rouge">to</code> relationship configuration:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">MB_Relationships_API</span><span class="o">::</span><span class="nf">register</span><span class="p">(</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'id'</span>   <span class="o">=&gt;</span> <span class="s1">'posts_to_pages'</span><span class="p">,</span>
    <span class="s1">'from'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'object_type'</span>  <span class="o">=&gt;</span> <span class="s1">'post'</span><span class="p">,</span>
        <span class="s1">'admin_column'</span> <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span>  <span class="c1">// THIS!</span>
    <span class="p">),</span>
    <span class="s1">'to'</span>   <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'object_type'</span>  <span class="o">=&gt;</span> <span class="s1">'post'</span><span class="p">,</span>
        <span class="s1">'post_type'</span>    <span class="o">=&gt;</span> <span class="s1">'page'</span><span class="p">,</span>
        <span class="s1">'admin_column'</span> <span class="o">=&gt;</span> <span class="s1">'after title'</span><span class="p">,</span> <span class="c1">// THIS!</span>
    <span class="p">),</span>
<span class="p">)</span> <span class="p">);</span>
</code></pre></div></div>

<p>Similar to <a href="/extensions/mb-admin-columns">MB Admin Columns</a>, the plugin supports 3 formats of the parameter:</p>

<h3 id="enable-admin-column">Enable admin column</h3>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s1">'admin_column'</span> <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
</code></pre></div></div>

<p>In this case, the column will be added to the end of the list table. And the title of the column will be the title of the connection meta box (when you edit a post).</p>

<h3 id="column-position">Column position</h3>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s1">'admin_column'</span> <span class="o">=&gt;</span> <span class="s1">'after title'</span>
</code></pre></div></div>

<p>The format is <code class="language-plaintext highlighter-rouge">'admin_column' =&gt; 'type column'</code> where:</p>

<table>
  <thead>
    <tr>
      <th>Param</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">type</code></td>
      <td>Must be <code class="language-plaintext highlighter-rouge">before</code>, <code class="language-plaintext highlighter-rouge">after</code> or <code class="language-plaintext highlighter-rouge">replace</code>. Specify the position of the custom column.</td>
    </tr>
    <tr>
      <td> </td>
      <td>
<code class="language-plaintext highlighter-rouge">before</code>: Insert the column before an existing column</td>
    </tr>
    <tr>
      <td> </td>
      <td>
<code class="language-plaintext highlighter-rouge">after</code>: Insert the column after an existing column</td>
    </tr>
    <tr>
      <td> </td>
      <td>
<code class="language-plaintext highlighter-rouge">replace</code>: Replace an existing column by the new one</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">column</code></td>
      <td>The target existing column</td>
    </tr>
  </tbody>
</table>

<p>Using this configuration, you are able to insert the column in any position you want.</p>

<p>In this case, the title of the column will be the title of the connection meta box (when you edit a post).</p>

<h3 id="advanced-configuration">Advanced configuration</h3>

<p>To add more rules for the admin column, you can declare <code class="language-plaintext highlighter-rouge">admin_column</code> parameter as an array which accepts the following keys:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s1">'admin_column'</span> <span class="o">=&gt;</span> <span class="p">[</span>
    <span class="s1">'position'</span> <span class="o">=&gt;</span> <span class="s1">'after title'</span><span class="p">,</span>
    <span class="s1">'title'</span>    <span class="o">=&gt;</span> <span class="s1">'Price'</span><span class="p">,</span>
    <span class="s1">'link'</span>     <span class="o">=&gt;</span> <span class="s1">'edit'</span><span class="p">,</span>
<span class="p">],</span>
</code></pre></div></div>

<p>The meaning of keys are described below:</p>

<table>
  <thead>
    <tr>
      <th>Key</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">position</code></td>
      <td>Specify where to insert the new column. It’s exactly the same as described in the #2 method above.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">title</code></td>
      <td>Column title. Optional. Default is the meta box title.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">link</code></td>
      <td>Config the link for the items displayed in the admin column. Can be <code class="language-plaintext highlighter-rouge">view</code> (click to view item on the front end - default), <code class="language-plaintext highlighter-rouge">edit</code> (click to edit item) or <code class="language-plaintext highlighter-rouge">false</code> (no link).</td>
    </tr>
  </tbody>
</table>

<h2 id="post-archive">Post archive</h2>

<p>All the examples above work well with single post, term or user. But if you want to display connected posts in the blog archive page, this method will create a dozen of queries for each post in the archive page. That’s a lot of extra queries.</p>

<p>To solve this problem, we need to use the following code:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">global</span> <span class="nv">$wp_query</span><span class="p">,</span> <span class="nv">$post</span><span class="p">;</span>

<span class="n">MB_Relationships_API</span><span class="o">::</span><span class="nf">each_connected</span><span class="p">(</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'id'</span>   <span class="o">=&gt;</span> <span class="s1">'posts_to_pages'</span><span class="p">,</span>
    <span class="s1">'from'</span> <span class="o">=&gt;</span> <span class="nv">$wp_query</span><span class="o">-&gt;</span><span class="n">posts</span><span class="p">,</span> <span class="c1">// 'from' or 'to'.</span>
<span class="p">)</span> <span class="p">);</span>

<span class="k">while</span> <span class="p">(</span> <span class="nf">have_posts</span><span class="p">()</span> <span class="p">)</span> <span class="o">:</span> <span class="nf">the_post</span><span class="p">();</span>

    <span class="c1">// Display connected pages</span>
    <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$post</span><span class="o">-&gt;</span><span class="n">connected</span> <span class="k">as</span> <span class="nv">$p</span> <span class="p">)</span> <span class="o">:</span>
        <span class="k">echo</span> <span class="nv">$p</span><span class="o">-&gt;</span><span class="n">post_title</span><span class="p">;</span>
        <span class="c1">// More core here...</span>
    <span class="k">endforeach</span><span class="p">;</span>

<span class="k">endwhile</span><span class="p">;</span>
</code></pre></div></div>

<h3 id="how-does-it-work">How does it work?</h3>

<p>On each request, WordPress automatically runs a query which finds the appropriate posts to display. These posts are stored in the global <code class="language-plaintext highlighter-rouge">$wp_query</code> variable.</p>

<p>The API function <code class="language-plaintext highlighter-rouge">MB_Relationships_API::each_connected()</code> will the take list of posts from <code class="language-plaintext highlighter-rouge">$wp_query-&gt;posts</code> and pull the related pages from the database (with a single database query) and assign them to each post via <code class="language-plaintext highlighter-rouge">connected</code> property. So, you can loop through <code class="language-plaintext highlighter-rouge">$post-&gt;connected</code> and display connected pages.</p>

<p>If you create a custom query than default WordPress query, just pass the array of objects to the function, like this:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$my_query</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">WP_Query</span><span class="p">(</span> <span class="k">array</span><span class="p">(</span>
    <span class="c1">// your parameters</span>
<span class="p">)</span> <span class="p">);</span>

<span class="n">MB_Relationships_API</span><span class="o">::</span><span class="nf">each_connected</span><span class="p">(</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'id'</span>   <span class="o">=&gt;</span> <span class="s1">'posts_to_pages'</span><span class="p">,</span>
    <span class="s1">'from'</span> <span class="o">=&gt;</span> <span class="nv">$my_query</span><span class="o">-&gt;</span><span class="n">posts</span><span class="p">,</span> <span class="c1">// Set to $my_query.</span>
<span class="p">)</span> <span class="p">);</span>

<span class="k">while</span> <span class="p">(</span> <span class="nv">$my_query</span><span class="o">-&gt;</span><span class="nf">have_posts</span><span class="p">()</span> <span class="p">)</span> <span class="o">:</span> <span class="nv">$my_query</span><span class="o">-&gt;</span><span class="nf">the_post</span><span class="p">();</span>

    <span class="c1">// Display connected pages</span>
    <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$post</span><span class="o">-&gt;</span><span class="n">connected</span> <span class="k">as</span> <span class="nv">$p</span> <span class="p">)</span> <span class="o">:</span>
        <span class="k">echo</span> <span class="nv">$p</span><span class="o">-&gt;</span><span class="n">post_title</span><span class="p">;</span>
        <span class="c1">// More code here.</span>
    <span class="k">endforeach</span><span class="p">;</span>

<span class="k">endwhile</span><span class="p">;</span>
</code></pre></div></div>

<p>The property name can be set to anything with an additional <code class="language-plaintext highlighter-rouge">'property' =&gt; 'your_property_name'</code>. See the below sections.</p>

<h3 id="multiple-connections">Multiple connections</h3>

<p>If you create multiple relationships between objects, you still can manipulate the query multiple time, like this:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Get connected pages and assign to property 'connected_pages'.</span>
<span class="n">MB_Relationships_API</span><span class="o">::</span><span class="nf">each_connected</span><span class="p">(</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'id'</span>       <span class="o">=&gt;</span> <span class="s1">'posts_to_pages'</span><span class="p">,</span>
    <span class="s1">'from'</span>     <span class="o">=&gt;</span> <span class="nv">$wp_query</span><span class="o">-&gt;</span><span class="n">posts</span><span class="p">,</span>
    <span class="s1">'property'</span> <span class="o">=&gt;</span> <span class="s1">'connected_pages'</span><span class="p">,</span>
<span class="p">)</span> <span class="p">);</span>

<span class="c1">// Get connected users and assign to property 'artists'.</span>
<span class="n">MB_Relationships_API</span><span class="o">::</span><span class="nf">each_connected</span><span class="p">(</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'id'</span>       <span class="o">=&gt;</span> <span class="s1">'users_to_posts'</span><span class="p">,</span>
    <span class="s1">'from'</span>     <span class="o">=&gt;</span> <span class="nv">$wp_query</span><span class="o">-&gt;</span><span class="n">posts</span><span class="p">,</span>
    <span class="s1">'property'</span> <span class="o">=&gt;</span> <span class="s1">'artists'</span><span class="p">,</span>
<span class="p">)</span> <span class="p">);</span>

<span class="k">while</span> <span class="p">(</span> <span class="nf">have_posts</span><span class="p">()</span> <span class="p">)</span> <span class="o">:</span> <span class="nf">the_post</span><span class="p">();</span>

    <span class="c1">// Display connected pages</span>
    <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$post</span><span class="o">-&gt;</span><span class="n">connected_pages</span> <span class="k">as</span> <span class="nv">$post</span> <span class="p">)</span> <span class="o">:</span> <span class="nf">setup_postdata</span><span class="p">(</span> <span class="nv">$post</span> <span class="p">);</span>
        <span class="nf">the_title</span><span class="p">();</span>
        <span class="mf">...</span>
    <span class="k">endforeach</span><span class="p">;</span>
    <span class="nf">wp_reset_postdata</span><span class="p">();</span> <span class="c1">// Set $post back to original post</span>

    <span class="c1">// Displayin connected users</span>
    <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$post</span><span class="o">-&gt;</span><span class="n">artists</span> <span class="k">as</span> <span class="nv">$artist</span> <span class="p">)</span> <span class="o">:</span>
        <span class="k">echo</span> <span class="nv">$artist</span><span class="o">-&gt;</span><span class="n">display_name</span><span class="p">;</span>
    <span class="k">endforeach</span><span class="p">;</span>

<span class="k">endwhile</span><span class="p">;</span>
</code></pre></div></div>

<h3 id="nesting">Nesting</h3>

<p>Since the <code class="language-plaintext highlighter-rouge">each_connected()</code> function accepts array of post objects, it’s easy to create nested query like this:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$my_query</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">WP_Query</span><span class="p">(</span> <span class="k">array</span><span class="p">(</span>
  <span class="s1">'post_type'</span> <span class="o">=&gt;</span> <span class="s1">'movie'</span>
<span class="p">)</span> <span class="p">);</span>
<span class="n">MB_Relationships_API</span><span class="o">::</span><span class="nf">each_connected</span><span class="p">(</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'id'</span>       <span class="o">=&gt;</span> <span class="s1">'movies_to_actors'</span><span class="p">,</span>
    <span class="s1">'from'</span>     <span class="o">=&gt;</span> <span class="nv">$my_query</span><span class="o">-&gt;</span><span class="n">posts</span><span class="p">,</span>
    <span class="s1">'property'</span> <span class="o">=&gt;</span> <span class="s1">'actors'</span><span class="p">,</span>
<span class="p">)</span> <span class="p">);</span>

<span class="k">while</span> <span class="p">(</span> <span class="nv">$my_query</span><span class="o">-&gt;</span><span class="nf">have_posts</span><span class="p">()</span> <span class="p">)</span> <span class="o">:</span> <span class="nv">$my_query</span><span class="o">-&gt;</span><span class="nf">the_post</span><span class="p">();</span>

    <span class="c1">// Another level of nesting</span>
    <span class="n">MB_Relationships_API</span><span class="o">::</span><span class="nf">each_connected</span><span class="p">(</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'id'</span>       <span class="o">=&gt;</span> <span class="s1">'actors_to_producers'</span><span class="p">,</span>
        <span class="s1">'from'</span>     <span class="o">=&gt;</span> <span class="nv">$post</span><span class="o">-&gt;</span><span class="n">actors</span><span class="p">,</span>
        <span class="s1">'property'</span> <span class="o">=&gt;</span> <span class="s1">'actors'</span><span class="p">,</span>
    <span class="p">)</span> <span class="p">);</span>

    <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$post</span><span class="o">-&gt;</span><span class="n">actors</span> <span class="k">as</span> <span class="nv">$post</span> <span class="p">)</span> <span class="o">:</span> <span class="nf">setup_postdata</span><span class="p">(</span> <span class="nv">$post</span> <span class="p">);</span>
        <span class="k">echo</span> <span class="s1">'&lt;h3&gt;Connected Producers&lt;/h3&gt;'</span><span class="p">;</span>

        <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$post</span><span class="o">-&gt;</span><span class="n">producers</span> <span class="k">as</span> <span class="nv">$post</span> <span class="p">)</span> <span class="o">:</span> <span class="nf">setup_postdata</span><span class="p">(</span> <span class="nv">$post</span> <span class="p">);</span>
            <span class="nf">the_title</span><span class="p">();</span>

            <span class="mf">...</span>
        <span class="k">endforeach</span><span class="p">;</span>
    <span class="k">endforeach</span><span class="p">;</span>

    <span class="nf">wp_reset_postdata</span><span class="p">();</span>
<span class="k">endwhile</span><span class="p">;</span>
</code></pre></div></div>

<h2 id="multiple-relationships">Multiple relationships</h2>

<p>For example, you have event-to-band and event-to-artist relationships and you want to get all bands and artists that connected from an event, then you can do the following:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$query</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">WP_Query</span><span class="p">(</span> <span class="p">[</span>
    <span class="s1">'relationship'</span> <span class="o">=&gt;</span> <span class="p">[</span>
        <span class="s1">'relation'</span> <span class="o">=&gt;</span> <span class="s1">'OR'</span><span class="p">,</span>
        <span class="p">[</span>
            <span class="s1">'id'</span>   <span class="o">=&gt;</span> <span class="s1">'events_to_bands'</span><span class="p">,</span>
            <span class="s1">'from'</span> <span class="o">=&gt;</span> <span class="nf">get_the_ID</span><span class="p">(),</span>
        <span class="p">],</span>
        <span class="p">[</span>
            <span class="s1">'id'</span>   <span class="o">=&gt;</span> <span class="s1">'events_to_artists'</span><span class="p">,</span>
            <span class="s1">'from'</span> <span class="o">=&gt;</span> <span class="nf">get_the_ID</span><span class="p">(),</span>
        <span class="p">],</span>
    <span class="p">],</span>
    <span class="s1">'nopaging'</span>     <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
<span class="p">]</span> <span class="p">);</span>
<span class="k">while</span> <span class="p">(</span> <span class="nv">$query</span><span class="o">-&gt;</span><span class="nf">have_posts</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nv">$query</span><span class="o">-&gt;</span><span class="nf">the_post</span><span class="p">();</span>
    <span class="k">echo</span> <span class="nf">get_the_title</span><span class="p">()</span> <span class="mf">.</span> <span class="s1">'&lt;br&gt;'</span><span class="p">;</span>
<span class="p">}</span>
<span class="nf">wp_reset_postdata</span><span class="p">();</span>
</code></pre></div></div>

<h2 id="creating-connections-programmatically">Creating connections programmatically</h2>

<p>The plugin has several public APIs that can help you create or delete connections between 2 items using code.</p>

<h3 id="has"><code class="language-plaintext highlighter-rouge">has</code></h3>

<p>This function checks if 2 objects has a specific relationship.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$has_connection</span> <span class="o">=</span> <span class="n">MB_Relationships_API</span><span class="o">::</span><span class="nf">has</span><span class="p">(</span> <span class="nv">$from</span><span class="p">,</span> <span class="nv">$to</span><span class="p">,</span> <span class="nv">$id</span> <span class="p">);</span>
<span class="k">if</span> <span class="p">(</span> <span class="nv">$has_connection</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s1">'They have a relationship.'</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s1">'No, they do not have any relationship.'</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">$from</code></td>
      <td>The ID of “from” object.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">$to</code></td>
      <td>The ID of “to” object.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">$id</code></td>
      <td>The relationship ID.</td>
    </tr>
  </tbody>
</table>

<h3 id="add"><code class="language-plaintext highlighter-rouge">add</code></h3>

<p>This function adds a specific relationship for 2 objects.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">MB_Relationships_API</span><span class="o">::</span><span class="nf">add</span><span class="p">(</span> <span class="nv">$from</span><span class="p">,</span> <span class="nv">$to</span><span class="p">,</span> <span class="nv">$id</span><span class="p">,</span> <span class="nv">$order_from</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="nv">$order_to</span> <span class="o">=</span> <span class="mi">1</span> <span class="p">);</span>
</code></pre></div></div>

<p>This function checks if the 2 objects already have a relationship and adds a new relationship only if they haven’t.</p>

<p>When calling <code class="language-plaintext highlighter-rouge">add</code> function, the plugin fires a hook as follow:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">do_action</span><span class="p">(</span> <span class="s1">'mb_relationships_add'</span><span class="p">,</span> <span class="nv">$from</span><span class="p">,</span> <span class="nv">$to</span><span class="p">,</span> <span class="nv">$id</span><span class="p">,</span> <span class="nv">$order_from</span><span class="p">,</span> <span class="nv">$order_to</span> <span class="p">);</span>
</code></pre></div></div>

<h3 id="delete"><code class="language-plaintext highlighter-rouge">delete</code></h3>

<p>This function deletes a specific relationship for 2 objects.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">MB_Relationships_API</span><span class="o">::</span><span class="nb">delete</span><span class="p">(</span> <span class="nv">$from</span><span class="p">,</span> <span class="nv">$to</span><span class="p">,</span> <span class="nv">$id</span> <span class="p">);</span>
</code></pre></div></div>

<p>This function checks if the 2 objects already have a relationship and delete that relationshp only if they have.</p>

<p>When calling <code class="language-plaintext highlighter-rouge">add</code> function, the plugin fires a hook as follow:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">do_action</span><span class="p">(</span> <span class="s1">'mb_relationships_delete'</span><span class="p">,</span> <span class="nv">$from</span><span class="p">,</span> <span class="nv">$to</span><span class="p">,</span> <span class="nv">$id</span> <span class="p">);</span>
</code></pre></div></div>

<h2 id="shortcode">Shortcode</h2>

<p>The plugin provides a single flexible shortcode to display connected items.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="n">mb_relationships</span> <span class="n">id</span><span class="o">=</span><span class="s2">"posts_to_pages"</span> <span class="n">direction</span><span class="o">=</span><span class="s2">"from"</span> <span class="n">mode</span><span class="o">=</span><span class="s2">"ul"</span><span class="p">]</span>
</code></pre></div></div>

<p>It accepts the following parameters:</p>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">id</code></td>
      <td>Relationship ID. Required.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">items</code></td>
      <td>List of items for getting connected items from/to. Optional. If missed, the shortcode will get the current object ID.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">direction</code></td>
      <td>Get connected items <code class="language-plaintext highlighter-rouge">from</code> (default) or <code class="language-plaintext highlighter-rouge">to</code>. Optional.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">mode</code></td>
      <td>How to display connected items? <code class="language-plaintext highlighter-rouge">ul</code> (unordered list - default), <code class="language-plaintext highlighter-rouge">ol</code> (ordered list) or <code class="language-plaintext highlighter-rouge">inline</code>.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">separator</code></td>
      <td>The separator between connected items if <code class="language-plaintext highlighter-rouge">mode</code> is set to <code class="language-plaintext highlighter-rouge">inline</code>. Optional.</td>
    </tr>
  </tbody>
</table>

<h2 id="database">Database</h2>

<p>The relationship data is stored in a single database <code class="language-plaintext highlighter-rouge">mb_relationships</code> with the following columns:</p>

<table>
  <thead>
    <tr>
      <th>Column</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ID</code></td>
      <td>The connection ID</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">from</code></td>
      <td>The ID of the “from” object</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">to</code></td>
      <td>The ID of the “to” object</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">type</code></td>
      <td>The relationship ID (type)</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">order_from</code></td>
      <td>The order if the item for the “from” side</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">order_to</code></td>
      <td>The order if the item for the “to” side</td>
    </tr>
  </tbody>
</table>

<p>This structure allows us to create simple and efficient queries. All columns are also indexed to optimize for speed.</p>

<p>If you use the extension as a separated plugin, e.g. not bundle it within another, then the table is created during plugin activation. It’s the ideal situation, where the plugin only checks for table existence only once.</p>

<p>If you bundle the extension within another plugin, then the table is checked and created when it’s loaded. While the check is relatively fast, it’s still an extra small query to the database.</p>


				<p><a target="_blank" href="//github.com/wpmetabox/docs/edit/master/_docs/extensions/mb-relationships.md"><svg class="icon icon-edit" aria-hidden="true" role="img"><use href="#icon-edit" xlink:href="#icon-edit"></use></svg>Edit this page on Github</a></p>
			</div>
			<aside class="toc">
				<div class="toc-wrapper">
					<h4 class="toc-heading">Table Of Content</h4>
					<nav class="toc-navigation" role="navigation"></nav>
				</div>
			</aside>
		</div>
	</article>
</main>

	<footer class="site-footer" role="contentinfo">
		<div class="container">
			<div class="footer-widgets grid grid--4">
				<section class="widget">
					<h3 class="widget-title">About</h3>
					<div class="textwidget">
						<p>We created Meta Box in 2010 to help developers to create custom meta boxes faster and easier. Now, Meta Box is not only a library with powerful API for custom fields, but also a framework that helps you control your data the way you want. <a href="https://metabox.io/about/">Read more →</a></p>
					</div>
				</section>
				<section class="widget">
					<h3 class="widget-title">Quick Links</h3>
					<ul class="menu">
						<li><a href="https://metabox.io/about/">About</a></li>
						<li><a href="https://metabox.io/faq/">FAQ</a></li>
						<li><a href="https://metabox.io/privacy-policy/">Privacy Policy</a></li>
						<li><a href="https://metabox.io/terms-conditions/">Terms &amp; Conditions</a></li>
						<li><a href="https://metabox.io/introducing-affiliate-program/">Affiliate</a></li>
						<li><a href="https://metabox.io/contact/">Contact</a></li>
					</ul>
				</section>
				<section class="widget">
					<h3 class="widget-title">Top Extensions</h3>
					<ul>
						<li><a href="https://metabox.io/plugins/meta-box-builder/">Meta Box Builder</a></li>
						<li><a href="https://metabox.io/plugins/meta-box-group/">Meta Box Group</a></li>
						<li><a href="https://metabox.io/plugins/mb-relationships/">MB Relationships</a></li>
						<li><a href="https://metabox.io/plugins/mb-custom-table/">MB Custom Table</a></li>
						<li><a href="https://metabox.io/plugins/mb-settings-page/">MB Settings Page</a></li>
						<li><a href="https://metabox.io/plugins/custom-post-type/">MB Custom Post Type</a></li>
						<li><a href="https://metabox.io/plugins/mb-frontend-submission/">MB Frontend Submission</a></li>
						<li><a href="https://metabox.io/plugins/meta-box-conditional-logic/">Meta Box Conditional Logic</a></li>
					</ul>
				</section>
				<section class="widget">
					<h3 class="widget-title">Connect With Us</h3>
					<nav class="social-navigation">
						<ul class="menu">
							<li><a href="https://www.youtube.com/channel/UC5azrxHYW9x8404hqTcUIAg"><svg class="icon icon-youtube" aria-hidden="true" role="img"><use href="#icon-youtube" xlink:href="#icon-youtube"></use></svg></a></li>
							<li><a href="https://www.facebook.com/wpmetabox"><svg class="icon icon-facebook" aria-hidden="true" role="img"><use href="#icon-facebook" xlink:href="#icon-facebook"></use></svg></a></li>
							<li><a href="https://twitter.com/wpmetabox"><svg class="icon icon-twitter" aria-hidden="true" role="img"><use href="#icon-twitter" xlink:href="#icon-twitter"></use></svg></a></li>
							<li><a href="https://github.com/wpmetabox/meta-box"><svg class="icon icon-github" aria-hidden="true" role="img"><use href="#icon-github" xlink:href="#icon-github"></use></svg></a></li>
						</ul>
					</nav>
					<h4>Our Network</h4>
					<ul class="network">
						<li><a href="https://gretathemes.com" title="Premium WordPress Themes" target="_blank">GretaThemes</a></li>
						<li><a href="https://wpautolistings.com" title="WordPress Car Dealer Plugin" target="_blank">WPAutoListings</a></li>
						<li><a href="https://wpslimseo.com" target="_blank">Slim SEO</a></li>
					</ul>
				</section>
			</div>
			<div class="site-info">
				<div class="credit">Copyright 2018 Meta Box.</div>
				<a class="company" href="https://elightup.com"><img src="/assets/elightup.png" alt="elightup" loading="lazy"></a>
			</div>
		</div>
	</footer>
</div>
<a href="#" id="scroll-to-top" class="scroll-to-top">
	<svg class="icon icon-arrow-up" aria-hidden="true" role="img"><use href="#icon-arrow-up" xlink:href="#icon-arrow-up"></use></svg>
</a>
<svg style="display: none;" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
	<symbol id="icon-facebook" viewbox="0 0 24 24">
		<path d="M20.007,3H3.993C3.445,3,3,3.445,3,3.993v16.013C3,20.555,3.445,21,3.993,21h8.621v-6.971h-2.346v-2.717h2.346V9.31 c0-2.325,1.42-3.591,3.494-3.591c0.993,0,1.847,0.074,2.096,0.107v2.43l-1.438,0.001c-1.128,0-1.346,0.536-1.346,1.323v1.734h2.69 l-0.35,2.717h-2.34V21h4.587C20.555,21,21,20.555,21,20.007V3.993C21,3.445,20.555,3,20.007,3z"></path>
	</symbol>
	<symbol id="icon-github" viewbox="0 0 24 24">
		<path d="M12,2C6.477,2,2,6.477,2,12c0,4.419,2.865,8.166,6.839,9.489c0.5,0.09,0.682-0.218,0.682-0.484 c0-0.236-0.009-0.866-0.014-1.699c-2.782,0.602-3.369-1.34-3.369-1.34c-0.455-1.157-1.11-1.465-1.11-1.465 c-0.909-0.62,0.069-0.608,0.069-0.608c1.004,0.071,1.532,1.03,1.532,1.03c0.891,1.529,2.341,1.089,2.91,0.833 c0.091-0.647,0.349-1.086,0.635-1.337c-2.22-0.251-4.555-1.111-4.555-4.943c0-1.091,0.39-1.984,1.03-2.682 C6.546,8.54,6.202,7.524,6.746,6.148c0,0,0.84-0.269,2.75,1.025C10.295,6.95,11.15,6.84,12,6.836 c0.85,0.004,1.705,0.114,2.504,0.336c1.909-1.294,2.748-1.025,2.748-1.025c0.546,1.376,0.202,2.394,0.1,2.646 c0.64,0.699,1.026,1.591,1.026,2.682c0,3.841-2.337,4.687-4.565,4.935c0.359,0.307,0.679,0.917,0.679,1.852 c0,1.335-0.012,2.415-0.012,2.741c0,0.269,0.18,0.579,0.688,0.481C19.138,20.161,22,16.416,22,12C22,6.477,17.523,2,12,2z"></path>
	</symbol>
	<symbol id="icon-twitter" viewbox="0 0 24 24">
		<path d="M22.23,5.924c-0.736,0.326-1.527,0.547-2.357,0.646c0.847-0.508,1.498-1.312,1.804-2.27 c-0.793,0.47-1.671,0.812-2.606,0.996C18.324,4.498,17.257,4,16.077,4c-2.266,0-4.103,1.837-4.103,4.103 c0,0.322,0.036,0.635,0.106,0.935C8.67,8.867,5.647,7.234,3.623,4.751C3.27,5.357,3.067,6.062,3.067,6.814 c0,1.424,0.724,2.679,1.825,3.415c-0.673-0.021-1.305-0.206-1.859-0.513c0,0.017,0,0.034,0,0.052c0,1.988,1.414,3.647,3.292,4.023 c-0.344,0.094-0.707,0.144-1.081,0.144c-0.264,0-0.521-0.026-0.772-0.074c0.522,1.63,2.038,2.816,3.833,2.85 c-1.404,1.1-3.174,1.756-5.096,1.756c-0.331,0-0.658-0.019-0.979-0.057c1.816,1.164,3.973,1.843,6.29,1.843 c7.547,0,11.675-6.252,11.675-11.675c0-0.178-0.004-0.355-0.012-0.531C20.985,7.47,21.68,6.747,22.23,5.924z"></path>
	</symbol>
	<symbol id="icon-youtube" viewbox="0 0 24 24">
		<path d="M21.8,8.001c0,0-0.195-1.378-0.795-1.985c-0.76-0.797-1.613-0.801-2.004-0.847c-2.799-0.202-6.997-0.202-6.997-0.202 h-0.009c0,0-4.198,0-6.997,0.202C4.608,5.216,3.756,5.22,2.995,6.016C2.395,6.623,2.2,8.001,2.2,8.001S2,9.62,2,11.238v1.517 c0,1.618,0.2,3.237,0.2,3.237s0.195,1.378,0.795,1.985c0.761,0.797,1.76,0.771,2.205,0.855c1.6,0.153,6.8,0.201,6.8,0.201 s4.203-0.006,7.001-0.209c0.391-0.047,1.243-0.051,2.004-0.847c0.6-0.607,0.795-1.985,0.795-1.985s0.2-1.618,0.2-3.237v-1.517 C22,9.62,21.8,8.001,21.8,8.001z M9.935,14.594l-0.001-5.62l5.404,2.82L9.935,14.594z"></path>
	</symbol>
	<symbol id="icon-edit" viewbox="0 0 1792 1792">
		<path d="M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z"></path>
	</symbol>
	<symbol id="icon-arrow-up" viewbox="0 0 24 24">
		<path d="M7.406 15.422l-1.406-1.406 6-6 6 6-1.406 1.406-4.594-4.594z"></path>
	</symbol>
	<symbol id="icon-info" viewbox="0 0 16 16">
		<path d="M8 1c1.070 0 2.076 0.417 2.833 1.175 0.754 0.755 1.169 1.758 1.167 2.824-0.002 1.23-0.485 1.888-0.996 2.585-0.47 0.64-1.002 1.365-1.004 2.414-0.001 0.51-0.176 0.647-0.355 0.744-0.318 0.172-0.871 0.259-1.645 0.259-1.189 0-1.645-0.208-1.819-0.382-0.045-0.045-0.182-0.182-0.181-0.616 0.003-1.053-0.533-1.78-1.005-2.422-0.512-0.696-0.996-1.353-0.995-2.579 0.002-1.070 0.418-2.075 1.173-2.83s1.759-1.171 2.827-1.171zM8 0c-2.761 0-4.996 2.239-5 5s2.004 3.343 2 5 1.343 2 3 2c1.657 0 2.996-0.343 3-2s1.996-2.239 2-5-2.239-5-5-5v0z"></path>
		<path d="M8 13c-1.234 0-2.259-0.274-2.463-1.516-0.024 0.168-0.037 0.34-0.037 0.516 0 1.657 1.119 2 2.5 2s2.5-0.343 2.5-2c0-0.176-0.013-0.348-0.037-0.516-0.204 1.241-1.229 1.516-2.463 1.516z"></path>
		<path d="M8 15c-0.987 0-1.807-0.274-1.97-1.516-0.019 0.168-0.030 0.34-0.030 0.516 0 1.657 0.895 2 2 2s2-0.343 2-2c0-0.176-0.010-0.348-0.030-0.516-0.163 1.241-0.983 1.516-1.97 1.516z"></path>
	</symbol>
	<symbol id="icon-danger" viewbox="0 0 16 16">
		<path d="M8 1.45l6.705 13.363h-13.409l6.705-13.363zM8 0c-0.345 0-0.69 0.233-0.951 0.698l-6.829 13.611c-0.523 0.93-0.078 1.691 0.989 1.691h13.583c1.067 0 1.512-0.761 0.989-1.691h0l-6.829-13.611c-0.262-0.465-0.606-0.698-0.951-0.698v0z"></path>
		<path d="M9 13c0 0.552-0.448 1-1 1s-1-0.448-1-1c0-0.552 0.448-1 1-1s1 0.448 1 1z"></path>
		<path d="M8 11c-0.552 0-1-0.448-1-1v-3c0-0.552 0.448-1 1-1s1 0.448 1 1v3c0 0.552-0.448 1-1 1z"></path>
	</symbol>
	<symbol id="icon-warning" viewbox="0 0 16 16">
		<path d="M8 1.5c-1.736 0-3.369 0.676-4.596 1.904s-1.904 2.86-1.904 4.596c0 1.736 0.676 3.369 1.904 4.596s2.86 1.904 4.596 1.904c1.736 0 3.369-0.676 4.596-1.904s1.904-2.86 1.904-4.596c0-1.736-0.676-3.369-1.904-4.596s-2.86-1.904-4.596-1.904zM8 0v0c4.418 0 8 3.582 8 8s-3.582 8-8 8c-4.418 0-8-3.582-8-8s3.582-8 8-8zM7 11h2v2h-2zM7 3h2v6h-2z"></path>
	</symbol>
	<symbol id="icon-copy" viewbox="0 0 1024 896">
		<path d="M128 768h256v64H128v-64z m320-384H128v64h320v-64z m128 192V448L384 640l192 192V704h320V576H576z m-288-64H128v64h160v-64zM128 704h160v-64H128v64z m576 64h64v128c-1 18-7 33-19 45s-27 18-45 19H64c-35 0-64-29-64-64V192c0-35 29-64 64-64h192C256 57 313 0 384 0s128 57 128 128h192c35 0 64 29 64 64v320h-64V320H64v576h640V768zM128 256h512c0-35-29-64-64-64h-64c-35 0-64-29-64-64s-29-64-64-64-64 29-64 64-29 64-64 64h-64c-35 0-64 29-64 64z"></path>
	</symbol>
</svg>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/combine/npm/docsearch.js@2.6.3/dist/cdn/docsearch.min.css,npm/magnific-popup@1.1.0/dist/magnific-popup.min.css" media="print" onload="this.media='all'">
<script src="https://cdn.jsdelivr.net/combine/npm/jquery@3.5.1,npm/magnific-popup@1.1.0,npm/docsearch.js@2.6.3/dist/cdn/docsearch.min.js,npm/clipboard@2.0.6,npm/tocbot@4.12.0/dist/tocbot.min.js"></script>
<script src="/assets/script.js"></script>
</body>
</html>
